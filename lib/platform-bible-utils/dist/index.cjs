"use strict";var V=Object.defineProperty;var L=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(L(r,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class F{constructor(e,t=1e4){m(this,"variableName");m(this,"promiseToValue");m(this,"resolver");m(this,"rejecter");this.variableName=e,this.promiseToValue=new Promise((s,a)=>{this.resolver=s,this.rejecter=a}),t>0&&setTimeout(()=>{this.rejecter&&(this.rejecter(`Timeout reached when waiting for ${this.variableName} to settle`),this.complete())},t),Object.seal(this)}get promise(){return this.promiseToValue}get hasSettled(){return Object.isFrozen(this)}resolveToValue(e,t=!1){if(this.resolver)console.debug(`${this.variableName} is being resolved now`),this.resolver(e),this.complete();else{if(t)throw Error(`${this.variableName} was already settled`);console.debug(`Ignoring subsequent resolution of ${this.variableName}`)}}rejectWithReason(e,t=!1){if(this.rejecter)console.debug(`${this.variableName} is being rejected now`),this.rejecter(e),this.complete();else{if(t)throw Error(`${this.variableName} was already settled`);console.debug(`Ignoring subsequent rejection of ${this.variableName}`)}}complete(){this.resolver=void 0,this.rejecter=void 0,Object.freeze(this)}}class K{constructor(e,t){m(this,"startingDocument");m(this,"contributions",new Map);m(this,"latestOutput");m(this,"copyDocuments");this.startingDocument=e,this.copyDocuments=t,this.updateBaseDocument(e)}get output(){return this.latestOutput}updateBaseDocument(e){return this.validateStartingDocument(e),this.startingDocument=this.copyDocuments?b(e):e,this.rebuild()}addOrUpdateContribution(e,t){this.validateContribution(e,t);const s=this.contributions.get(e),a=this.copyDocuments&&t?b(t):t;this.contributions.set(e,a);try{return this.rebuild()}catch(i){throw s?this.contributions.set(e,s):this.contributions.delete(e),new Error(`Error when setting the document named ${e}: ${i}`)}}deleteContribution(e){const t=this.contributions.get(e);if(!t)throw new Error("{documentKey} does not exist");this.contributions.delete(e);try{return this.rebuild()}catch(s){throw this.contributions.set(e,t),new Error(`Error when deleting the document named ${e}: ${s}`)}}rebuild(){if(this.contributions.size===0){const t=b(this.startingDocument);return this.validateOutput(t),this.latestOutput=t,this.latestOutput}let e=this.startingDocument;return this.contributions.forEach(t=>{e=M(e,t),this.validateOutput(e)}),this.latestOutput=e,this.latestOutput}}function b(r){return JSON.parse(JSON.stringify(r))}function k(...r){let e=!0;return r.forEach(t=>{(!t||typeof t!="object"||Array.isArray(t))&&(e=!1)}),e}function W(...r){let e=!0;return r.forEach(t=>{(!t||typeof t!="object"||!Array.isArray(t))&&(e=!1)}),e}function M(r,e){const t=b(r);return e&&Object.keys(e).forEach(s=>{if(Object.hasOwn(r,s))if(k(r[s],e[s]))t[s]=M(r[s],e[s]);else if(W(r[s],e[s]))t[s]=t[s].concat(e[s]);else throw new Error(`Cannot merge objects: key "${s}" already exists in the target object`);else t[s]=e[s]}),t}class Z{constructor(e="Anonymous"){m(this,"unsubscribers",new Set);this.name=e}add(...e){e.forEach(t=>{"dispose"in t?this.unsubscribers.add(t.dispose):this.unsubscribers.add(t)})}async runAllUnsubscribers(){const e=[...this.unsubscribers].map(s=>s()),t=await Promise.all(e);return this.unsubscribers.clear(),t.every((s,a)=>(s||console.error(`UnsubscriberAsyncList ${this.name}: Unsubscriber at index ${a} failed!`),s))}}class X{constructor(){m(this,"subscribe",this.event);m(this,"subscriptions");m(this,"lazyEvent");m(this,"isDisposed",!1);m(this,"dispose",()=>this.disposeFn());m(this,"emit",e=>{this.emitFn(e)})}get event(){return this.assertNotDisposed(),this.lazyEvent||(this.lazyEvent=e=>{if(!e||typeof e!="function")throw new Error("Event handler callback must be a function!");return this.subscriptions||(this.subscriptions=[]),this.subscriptions.push(e),()=>{if(!this.subscriptions)return!1;const t=this.subscriptions.indexOf(e);return t<0?!1:(this.subscriptions.splice(t,1),!0)}}),this.lazyEvent}emitFn(e){var t;this.assertNotDisposed(),(t=this.subscriptions)==null||t.forEach(s=>s(e))}assertNotDisposed(){if(this.isDisposed)throw new Error("Emitter is disposed")}disposeFn(){return this.assertNotDisposed(),this.isDisposed=!0,this.subscriptions=void 0,this.lazyEvent=void 0,Promise.resolve(!0)}}const P=[{shortName:"ERR",fullNames:["ERROR"],chapters:-1},{shortName:"GEN",fullNames:["Genesis"],chapters:50},{shortName:"EXO",fullNames:["Exodus"],chapters:40},{shortName:"LEV",fullNames:["Leviticus"],chapters:27},{shortName:"NUM",fullNames:["Numbers"],chapters:36},{shortName:"DEU",fullNames:["Deuteronomy"],chapters:34},{shortName:"JOS",fullNames:["Joshua"],chapters:24},{shortName:"JDG",fullNames:["Judges"],chapters:21},{shortName:"RUT",fullNames:["Ruth"],chapters:4},{shortName:"1SA",fullNames:["1 Samuel"],chapters:31},{shortName:"2SA",fullNames:["2 Samuel"],chapters:24},{shortName:"1KI",fullNames:["1 Kings"],chapters:22},{shortName:"2KI",fullNames:["2 Kings"],chapters:25},{shortName:"1CH",fullNames:["1 Chronicles"],chapters:29},{shortName:"2CH",fullNames:["2 Chronicles"],chapters:36},{shortName:"EZR",fullNames:["Ezra"],chapters:10},{shortName:"NEH",fullNames:["Nehemiah"],chapters:13},{shortName:"EST",fullNames:["Esther"],chapters:10},{shortName:"JOB",fullNames:["Job"],chapters:42},{shortName:"PSA",fullNames:["Psalm","Psalms"],chapters:150},{shortName:"PRO",fullNames:["Proverbs"],chapters:31},{shortName:"ECC",fullNames:["Ecclesiastes"],chapters:12},{shortName:"SNG",fullNames:["Song of Solomon","Song of Songs"],chapters:8},{shortName:"ISA",fullNames:["Isaiah"],chapters:66},{shortName:"JER",fullNames:["Jeremiah"],chapters:52},{shortName:"LAM",fullNames:["Lamentations"],chapters:5},{shortName:"EZK",fullNames:["Ezekiel"],chapters:48},{shortName:"DAN",fullNames:["Daniel"],chapters:12},{shortName:"HOS",fullNames:["Hosea"],chapters:14},{shortName:"JOL",fullNames:["Joel"],chapters:3},{shortName:"AMO",fullNames:["Amos"],chapters:9},{shortName:"OBA",fullNames:["Obadiah"],chapters:1},{shortName:"JON",fullNames:["Jonah"],chapters:4},{shortName:"MIC",fullNames:["Micah"],chapters:7},{shortName:"NAM",fullNames:["Nahum"],chapters:3},{shortName:"HAB",fullNames:["Habakkuk"],chapters:3},{shortName:"ZEP",fullNames:["Zephaniah"],chapters:3},{shortName:"HAG",fullNames:["Haggai"],chapters:2},{shortName:"ZEC",fullNames:["Zechariah"],chapters:14},{shortName:"MAL",fullNames:["Malachi"],chapters:4},{shortName:"MAT",fullNames:["Matthew"],chapters:28},{shortName:"MRK",fullNames:["Mark"],chapters:16},{shortName:"LUK",fullNames:["Luke"],chapters:24},{shortName:"JHN",fullNames:["John"],chapters:21},{shortName:"ACT",fullNames:["Acts"],chapters:28},{shortName:"ROM",fullNames:["Romans"],chapters:16},{shortName:"1CO",fullNames:["1 Corinthians"],chapters:16},{shortName:"2CO",fullNames:["2 Corinthians"],chapters:13},{shortName:"GAL",fullNames:["Galatians"],chapters:6},{shortName:"EPH",fullNames:["Ephesians"],chapters:6},{shortName:"PHP",fullNames:["Philippians"],chapters:4},{shortName:"COL",fullNames:["Colossians"],chapters:4},{shortName:"1TH",fullNames:["1 Thessalonians"],chapters:5},{shortName:"2TH",fullNames:["2 Thessalonians"],chapters:3},{shortName:"1TI",fullNames:["1 Timothy"],chapters:6},{shortName:"2TI",fullNames:["2 Timothy"],chapters:4},{shortName:"TIT",fullNames:["Titus"],chapters:3},{shortName:"PHM",fullNames:["Philemon"],chapters:1},{shortName:"HEB",fullNames:["Hebrews"],chapters:13},{shortName:"JAS",fullNames:["James"],chapters:5},{shortName:"1PE",fullNames:["1 Peter"],chapters:5},{shortName:"2PE",fullNames:["2 Peter"],chapters:3},{shortName:"1JN",fullNames:["1 John"],chapters:5},{shortName:"2JN",fullNames:["2 John"],chapters:1},{shortName:"3JN",fullNames:["3 John"],chapters:1},{shortName:"JUD",fullNames:["Jude"],chapters:1},{shortName:"REV",fullNames:["Revelation"],chapters:22}],D=1,$=P.length-1,J=1,B=1,_=r=>{var e;return((e=P[r])==null?void 0:e.chapters)??-1},Q=(r,e)=>({bookNum:Math.max(D,Math.min(r.bookNum+e,$)),chapterNum:1,verseNum:1}),Y=(r,e)=>({...r,chapterNum:Math.min(Math.max(J,r.chapterNum+e),_(r.bookNum)),verseNum:1}),ee=(r,e)=>({...r,verseNum:Math.max(B,r.verseNum+e)}),re=r=>(...e)=>r.map(s=>s(...e)).every(s=>s),te=r=>async(...e)=>{const t=r.map(async s=>s(...e));return(await Promise.all(t)).every(s=>s)};function se(){return"00-0-4-1-000".replace(/[^-]/g,r=>((Math.random()+~~r)*65536>>r).toString(16).padStart(4,"0"))}function U(r){return typeof r=="string"||r instanceof String}function ae(r,e=300){if(U(r))throw new Error("Tried to debounce a string! Could be XSS");let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>r(...s),e)}}function ie(r,e,t){const s=new Map;return r.forEach(a=>{const i=e(a),n=s.get(i),u=t?t(a,i):a;n?n.push(u):s.set(i,[u])}),s}function ne(r){return typeof r=="object"&&r!==null&&"message"in r&&typeof r.message=="string"}function oe(r){if(ne(r))return r;try{return new Error(JSON.stringify(r))}catch{return new Error(String(r))}}function ue(r){return oe(r).message}function I(r){return new Promise(e=>setTimeout(e,r))}function le(r,e){const t=I(e).then(()=>{});return Promise.any([t,r()])}function ce(r,e="obj"){const t=new Set;Object.getOwnPropertyNames(r).forEach(a=>{try{typeof r[a]=="function"&&t.add(a)}catch(i){console.debug(`Skipping ${a} on ${e} due to error: ${i}`)}});let s=Object.getPrototypeOf(r);for(;s&&Object.getPrototypeOf(s);)Object.getOwnPropertyNames(s).forEach(a=>{try{typeof r[a]=="function"&&t.add(a)}catch(i){console.debug(`Skipping ${a} on ${e}'s prototype due to error: ${i}`)}}),s=Object.getPrototypeOf(s);return t}var he=Object.getOwnPropertyNames,fe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty;function S(r,e){return function(s,a,i){return r(s,a,i)&&e(s,a,i)}}function d(r){return function(t,s,a){if(!t||!s||typeof t!="object"||typeof s!="object")return r(t,s,a);var i=a.cache,n=i.get(t),u=i.get(s);if(n&&u)return n===s&&u===t;i.set(t,s),i.set(s,t);var c=r(t,s,a);return i.delete(t),i.delete(s),c}}function A(r){return he(r).concat(fe(r))}var x=Object.hasOwn||function(r,e){return me.call(r,e)};function g(r,e){return r||e?r===e:r===e||r!==r&&e!==e}var z="_owner",w=Object.getOwnPropertyDescriptor,q=Object.keys;function pe(r,e,t){var s=r.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(r[s],e[s],s,s,r,e,t))return!1;return!0}function Ne(r,e){return g(r.getTime(),e.getTime())}function T(r,e,t){if(r.size!==e.size)return!1;for(var s={},a=r.entries(),i=0,n,u;(n=a.next())&&!n.done;){for(var c=e.entries(),f=!1,o=0;(u=c.next())&&!u.done;){var l=n.value,h=l[0],N=l[1],p=u.value,y=p[0],H=p[1];!f&&!s[o]&&(f=t.equals(h,y,i,o,r,e,t)&&t.equals(N,H,h,y,r,e,t))&&(s[o]=!0),o++}if(!f)return!1;i++}return!0}function Ee(r,e,t){var s=q(r),a=s.length;if(q(e).length!==a)return!1;for(var i;a-- >0;)if(i=s[a],i===z&&(r.$$typeof||e.$$typeof)&&r.$$typeof!==e.$$typeof||!x(e,i)||!t.equals(r[i],e[i],i,i,r,e,t))return!1;return!0}function v(r,e,t){var s=A(r),a=s.length;if(A(e).length!==a)return!1;for(var i,n,u;a-- >0;)if(i=s[a],i===z&&(r.$$typeof||e.$$typeof)&&r.$$typeof!==e.$$typeof||!x(e,i)||!t.equals(r[i],e[i],i,i,r,e,t)||(n=w(r,i),u=w(e,i),(n||u)&&(!n||!u||n.configurable!==u.configurable||n.enumerable!==u.enumerable||n.writable!==u.writable)))return!1;return!0}function ge(r,e){return g(r.valueOf(),e.valueOf())}function ve(r,e){return r.source===e.source&&r.flags===e.flags}function j(r,e,t){if(r.size!==e.size)return!1;for(var s={},a=r.values(),i,n;(i=a.next())&&!i.done;){for(var u=e.values(),c=!1,f=0;(n=u.next())&&!n.done;)!c&&!s[f]&&(c=t.equals(i.value,n.value,i.value,n.value,r,e,t))&&(s[f]=!0),f++;if(!c)return!1}return!0}function de(r,e){var t=r.length;if(e.length!==t)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}var be="[object Arguments]",Oe="[object Boolean]",ye="[object Date]",Se="[object Map]",Ae="[object Number]",we="[object Object]",qe="[object RegExp]",Te="[object Set]",je="[object String]",Ce=Array.isArray,C=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,R=Object.assign,Re=Object.prototype.toString.call.bind(Object.prototype.toString);function Me(r){var e=r.areArraysEqual,t=r.areDatesEqual,s=r.areMapsEqual,a=r.areObjectsEqual,i=r.arePrimitiveWrappersEqual,n=r.areRegExpsEqual,u=r.areSetsEqual,c=r.areTypedArraysEqual;return function(o,l,h){if(o===l)return!0;if(o==null||l==null||typeof o!="object"||typeof l!="object")return o!==o&&l!==l;var N=o.constructor;if(N!==l.constructor)return!1;if(N===Object)return a(o,l,h);if(Ce(o))return e(o,l,h);if(C!=null&&C(o))return c(o,l,h);if(N===Date)return t(o,l,h);if(N===RegExp)return n(o,l,h);if(N===Map)return s(o,l,h);if(N===Set)return u(o,l,h);var p=Re(o);return p===ye?t(o,l,h):p===qe?n(o,l,h):p===Se?s(o,l,h):p===Te?u(o,l,h):p===we?typeof o.then!="function"&&typeof l.then!="function"&&a(o,l,h):p===be?a(o,l,h):p===Oe||p===Ae||p===je?i(o,l,h):!1}}function Pe(r){var e=r.circular,t=r.createCustomConfig,s=r.strict,a={areArraysEqual:s?v:pe,areDatesEqual:Ne,areMapsEqual:s?S(T,v):T,areObjectsEqual:s?v:Ee,arePrimitiveWrappersEqual:ge,areRegExpsEqual:ve,areSetsEqual:s?S(j,v):j,areTypedArraysEqual:s?v:de};if(t&&(a=R({},a,t(a))),e){var i=d(a.areArraysEqual),n=d(a.areMapsEqual),u=d(a.areObjectsEqual),c=d(a.areSetsEqual);a=R({},a,{areArraysEqual:i,areMapsEqual:n,areObjectsEqual:u,areSetsEqual:c})}return a}function De(r){return function(e,t,s,a,i,n,u){return r(e,t,u)}}function $e(r){var e=r.circular,t=r.comparator,s=r.createState,a=r.equals,i=r.strict;if(s)return function(c,f){var o=s(),l=o.cache,h=l===void 0?e?new WeakMap:void 0:l,N=o.meta;return t(c,f,{cache:h,equals:a,meta:N,strict:i})};if(e)return function(c,f){return t(c,f,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var n={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,f){return t(c,f,n)}}var Je=E();E({strict:!0});E({circular:!0});E({circular:!0,strict:!0});E({createInternalComparator:function(){return g}});E({strict:!0,createInternalComparator:function(){return g}});E({circular:!0,createInternalComparator:function(){return g}});E({circular:!0,createInternalComparator:function(){return g},strict:!0});function E(r){r===void 0&&(r={});var e=r.circular,t=e===void 0?!1:e,s=r.createInternalComparator,a=r.createState,i=r.strict,n=i===void 0?!1:i,u=Pe(r),c=Me(u),f=s?s(c):De(c);return $e({circular:t,comparator:c,createState:a,equals:f,strict:n})}function Be(r,e){return Je(r,e)}function O(r,e,t){return JSON.stringify(r,(a,i)=>{let n=i;return e&&(n=e(a,n)),n===void 0&&(n=null),n},t)}function G(r,e){function t(a){return Object.keys(a).forEach(i=>{a[i]===null?a[i]=void 0:typeof a[i]=="object"&&(a[i]=t(a[i]))}),a}const s=JSON.parse(r,e);if(s!==null)return typeof s=="object"?t(s):s}function _e(r){try{const e=O(r);return e===O(G(e))}catch{return!1}}const Ue=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");exports.AsyncVariable=F;exports.DocumentCombinerEngine=K;exports.FIRST_SCR_BOOK_NUM=D;exports.FIRST_SCR_CHAPTER_NUM=J;exports.FIRST_SCR_VERSE_NUM=B;exports.LAST_SCR_BOOK_NUM=$;exports.PlatformEventEmitter=X;exports.UnsubscriberAsyncList=Z;exports.aggregateUnsubscriberAsyncs=te;exports.aggregateUnsubscribers=re;exports.debounce=ae;exports.deepEqual=Be;exports.deserialize=G;exports.getAllObjectFunctionNames=ce;exports.getChaptersForBook=_;exports.getErrorMessage=ue;exports.groupBy=ie;exports.htmlEncode=Ue;exports.isSerializable=_e;exports.isString=U;exports.newGuid=se;exports.offsetBook=Q;exports.offsetChapter=Y;exports.offsetVerse=ee;exports.serialize=O;exports.wait=I;exports.waitForDuration=le;
//# sourceMappingURL=index.cjs.map
